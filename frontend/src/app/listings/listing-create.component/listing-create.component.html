<div>
  <!-- Formular -->
  <form (ngSubmit)="onSubmit()" #f="ngForm">
    @if (errorMsg) {
      <div class="error">{{ errorMsg }}</div>
    }

    <!-- Title -->
    <input
      name="title"
      [(ngModel)]="title"
      required
      maxlength="120"
      placeholder="Title" />

    <!-- Price in USD -->
    <input
      name="priceUsd"
      [(ngModel)]="priceUsd"
      type="number"
      min="0"
      step="1"
      required
      placeholder="Price in USD" />

    <input
      name="quantity"
      [(ngModel)]="quantity"
      type="number"
      min="0"
      step="1"
      required
      placeholder="Quantity in stock" />

    <!-- Images -->
    <textarea
      name="imagesText"
      [(ngModel)]="imagesText"
      placeholder="Image URLs, separated by line or comma">
    </textarea>

    <p>Choose the category:</p>
    <!-- Kategorie-Breadcrumbs -->
    <nav class="breadcrumbs">
      <a href (click)="$event.preventDefault(); goToLevel(-1)">All</a>
      @for (seg of crumbs(); track $index) {
        <span> › </span>
        <a href (click)="$event.preventDefault(); goToLevel($index)">
          {{ pretty(seg) }}
        </a>
      }
    </nav>

    <!-- Kategorie-Auswahl -->
    @if (cats$ | async; as cats) {
      <aside class="box categories">
        <ul>
          @for (c of cats; track c.path) {
            <li>
              <button type="button" class="chip" (click)="goInto(c)">
                {{ c.name }}
              </button>
            </li>
          }
        </ul>
      </aside>
    }

    <!-- Submit -->
    <button type="submit" [disabled]="loading || f.invalid">
      @if (loading) { Creating… } @else { Create Listing }
    </button>
  </form>

  <button type="button" (click)="back()">Back</button>
</div>
